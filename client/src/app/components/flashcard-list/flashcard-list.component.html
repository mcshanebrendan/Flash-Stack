<h2>FlashStack</h2>

<!-- ðŸ”¹ Filter by Category -->
<label for="categoryFilter">Filter by Category:</label>
<select id="categoryFilter" [(ngModel)]="selectedCategory" (change)="filterFlashcards()">
  <option value="">All</option>
  <option *ngFor="let cat of categories" [value]="cat">{{ cat }}</option>
</select>

<div class="shuffle-button-container">
  <button (click)="shuffleFlashcards()"> Shuffle Flashcards</button>
</div>

<div class="flashcard-container">
  <div *ngFor="let card of flashcards" 
       class="flashcard" 
       [class.flipped]="card.flipped" 
       (click)="toggleFlip(card)">

    <div class="flashcard-inner">

      <!-- Front -->
      <div class="flashcard-front" *ngIf="editingId !== card.id">
        <div class="question"><strong>Q:</strong> {{ card.question }}</div>
        <div class="category"><em>Category: {{ card.category || 'General' }}</em></div>
      </div>

      <!-- Back -->
      <div class="flashcard-back" *ngIf="editingId !== card.id">
        <strong>A:</strong> {{ card.answer }}
      </div>

      <!-- Editing view -->
      <div class="flashcard-edit" *ngIf="editingId === card.id">
        <input [(ngModel)]="editedQuestion" placeholder="Edit question" />
        <input [(ngModel)]="editedAnswer" placeholder="Edit answer" />
        <input [(ngModel)]="editedCategory" placeholder="Edit category" />
      </div>

    </div>

    <!-- Action buttons -->
    <div class="flashcard-actions">
      <button *ngIf="editingId !== card.id" class="edit-btn" (click)="startEditing(card); $event.stopPropagation()">Edit</button>
      <button *ngIf="editingId === card.id" class="save-btn" (click)="saveEdit(card); $event.stopPropagation()">Save</button>
      <button *ngIf="editingId === card.id" class="cancel-btn" (click)="cancelEdit(); $event.stopPropagation()">Cancel</button>
      <button class="delete-btn" (click)="deleteFlashcard(card.id); $event.stopPropagation()">Delete</button>
    </div>

  </div>
</div>

<h3>Add New Flashcard</h3>
<div class="add-form">
  <input [(ngModel)]="newQuestion" placeholder="Question" />
  <input [(ngModel)]="newAnswer" placeholder="Answer" />
  <input [(ngModel)]="newCategory" placeholder="Category (optional)" />
  <button class="add-btn" (click)="addFlashcard()">Add</button>
</div>
