<h2>ðŸ“š FlashStack</h2>

<!-- ðŸ”¹ Filter by Category -->
<label for="categoryFilter">Filter by Category:</label>
<select id="categoryFilter" [(ngModel)]="selectedCategory" (change)="filterFlashcards()">
  <option value="">All</option>
  <option *ngFor="let cat of categories" [value]="cat">{{ cat }}</option>
</select>

<div class="shuffle-button-container">
  <button (click)="shuffleFlashcards()">ðŸ”€ Shuffle Flashcards</button>
</div>

<div class="flashcard-container">
  <div *ngFor="let card of flashcards" class="flashcard">
    
    <!-- Non-editing view -->
    <div *ngIf="editingId !== card.id">
      <div class="question"><strong>Q:</strong> {{ card.question }}</div>
      <div class="category"><em>Category: {{ card.category || 'General' }}</em></div>

      <!-- Toggle Button -->
      <button (click)="toggleAnswer(card)">
        {{ card.showAnswer ? 'Hide Answer' : 'Show Answer' }}
      </button>

      <!-- Conditional Answer -->
      <div class="answer" *ngIf="card.showAnswer">
        <strong>A:</strong> {{ card.answer }}
      </div>
    </div>

    <!-- Editing view -->
    <div *ngIf="editingId === card.id">
      <input [(ngModel)]="editedQuestion" placeholder="Edit question" />
      <input [(ngModel)]="editedAnswer" placeholder="Edit answer" />
      <input [(ngModel)]="editedCategory" placeholder="Edit category" />
    </div>

    <!-- Action buttons -->
    <div class="flashcard-actions">
      <button *ngIf="editingId !== card.id" class="edit-btn" (click)="startEditing(card)">Edit</button>
      <button *ngIf="editingId === card.id" class="save-btn" (click)="saveEdit(card)">Save</button>
      <button *ngIf="editingId === card.id" class="cancel-btn" (click)="cancelEdit()">Cancel</button>
      <button class="delete-btn" (click)="deleteFlashcard(card.id)">Delete</button>
    </div>

  </div>
</div>

<h3>Add New Flashcard</h3>
<div class="add-form">
  <input [(ngModel)]="newQuestion" placeholder="Question" />
  <input [(ngModel)]="newAnswer" placeholder="Answer" />
  <input [(ngModel)]="newCategory" placeholder="Category (optional)" />
  <button class="add-btn" (click)="addFlashcard()">Add</button>
</div>
